# 기획서

서비스명: MOSAIC.ID

서비스 형태: 애플리케이션, API

## Q1. 서비스에 대해 요약

AI를 활용하여 실시간 방송을 할 때 타인의 얼굴을 자동으로 모자이크하여 초상권 침해 등을 방지하는 서비스

요즘 일인 미디어, 실시간 방송이 늘어남에 따라 그에 따른 초상권 침해와 같은 문제도 증가하고 있다. 이를 해결 하기 위해 MOSAIC.ID는 실시간으로 방송을 할 때 타인의 얼굴을 자동으로 모자이크 해주는 서비스를 API와 애플리케이션으로 제공한다. 모자이크의 위치를 추정하는 방식은 네이버의 AI API를 활용하여 얼굴의 위치를 먼저 이미지 상에서 추측한 다음 화이트리스트에 등록된 얼굴인지 아닌지 판단을 해 이미지를 모자이크한다.

## Q2. 서비스에 대해 자유롭게 설명

### 목적

현재 V Live, Youtube Live, 인터넷 방송(Twitch, Afreeca TV 등)과 같은 실시간 방송 플랫폼 수요와 공급이 급격히 증가하고 있다. 그러나 편집되어 나가는 영상이 아니라 이들은 실시간 매체이다 보니 의도치 않게 다른 사람의 얼굴등이 방송에 노출하는 경우가 있고 이에 관한 문제가 제기가 되고 있다.

> 길거리 야외방송의 초상권 침해나 명예훼손 문제는 지속적으로 제기됐다. 이에 일부 BJ들은 ‘영상 게재 시 모자이크, 삭제요청은 이메일로 보내주세요’라는 공지를 등록했다. 하지만 실시간으로 진행되는 야외방송의 경우 모자이크 처리가 어려워 의도치않게 얼굴이 나가는 경우가 다반사다.

이에 관해 청와대 국민 청원까지 올라오기도 하였다.

> 청와대 국민청원 게시판에는 “인터넷 길거리 방송 일명 야방, 야킹 금지해주세요”라는 청원글이 게재됐다. 그는 “나의 사생활이 나도 모르는 사이에 생중계되고 그것이 유튜브라는 동영상 채널에 올라가 여기저기 퍼지고 있다는 게 너무 어이가 없다”고 전했다. 그러면서 “초상권 침해라는 법이 왜 있는지 모르겠다”고 토로했다.

[관련 기사](http://moneys.mt.co.kr/news/mwView.php?no=2019112616538075933&code=w1602&MRN)

이를 해결하기 위해 기존의 방송 플랫폼이나 동영상 녹화 플랫폼에 AI 기술을 활용해 타인의 얼굴을 자동으로 모자이크 해주는 서비스를 제공하려 한다.

이식하기 쉽도록 API를 제공하여 기존의 방송 플랫폼에 쉽게 이식이 가능하고 이 자체로도 방송이 가능하도록 한다. 원하지 않을 경우 OFF 할 수 있는 기능도 추가한다.

### 기대효과

- 초상권 침해나 명예 훼손 문제를 방지한다.
- 방송된 영상을 더욱 쉽게 가공할 수 있어 2차 창작을 용이하게 한다.
- 위와 같은 효과로 궁극적으로 현재 성행하는 개인미디어의 발전에 도움을 준다.

### 구현방식

#### 서버

`nginx-rtmp`(오픈소스)와 네이버 클라우드 플랫폼을 활용한 서버를 구축한다.
미디어 서버와 전송 서버의 역할을 모두 수행하며 만약 사용자가 많아질시 네이버 클루우드 플랫폼의 CDN을 사용할 수 있다.

- 영상 전처리
  - RTMP로 온 영상 청크 파일들을 `image`의 연속으로 변환

![Pose Estimation 예시 이미지](https://xv-ncloud.pstatic.net/images/service/aiService/poseEsimation-1.xl.png)

- Face Detection: 얼굴 위치 추정
  - 네이버의 Pose Estimation API를 사용하여에서 `image`의 신체 부위를 탐지해낸 JSON을 얻는다.
  - Clova Face Recognition(CFR)의 face를 이용하여 `image`의 얼굴 정보 JSON을 얻는다.
  - 위 정보를 활용하여 각 사람들의 얼굴 범위를 정확히 추정한다.

- Face Recognition: 추정된 얼굴의 위치의 이미지를 추출하고 `user_id`의 화이트리스트 속 얼굴의 이미지를 비교하여 모자이크 처리를 할지 안 할지를 판단하고 적용한다.
  - 방안1: 직접 AI를 만들어서 판단한다.
    - CNN을 통한 binary classification으로 구현한다.
    - 영상 자체가 시계열 데이터이므로 이를 활용한 방안을 생각한다.
  - 방안2: 네이버 API로 얻은 정보로 구현을 통해 판단한다.
    - Face Detection에 얻은 성별 정보, 나이 정보와 Clova Face Recognition(CFR)의 celebrity 정보등을 활용하여 판단

- 영상 변환
  - 모자이크된 이미지를 영상으로 변환
  - 화질 및 비트레이트 변환
  - HLS(HTTP Live Streaming) 변환

- 영상 전송

#### 클라이언트

React Native를 통해 방송 송출 및 수신이 가능한 애플리케이션을 제작한다.

- 화이트리스트 등록
  - 얼굴을 가리지 않을 사람의 얼굴을 촬영하여 화이트 리스트에 등록

- 영상 촬영

- 영상 인코딩
  - 오픈 소스 인코더 `FFmpeg` 를 활용하여 라이브 인코딩

- 영상 송출
  - `RTMP` 프로토콜을 활용하여 영상 송출

- 영상 재생

### 예상 이미지

### Future Work

해커톤 중 구현 시간이 남거나
해커톤 이후 더욱 발전할 수 있을만한 사항

- 동영상 촬영에도 적용 (API를 활용해 만들기)
- 얼굴 뿐 아니라 성적인 요소, 타사 제품의 로고 등을 자동으로 가리기
- CDN 서버
